---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts
		.filter((post) => post.id.startsWith('es/'))
		.map((post) => ({
			params: { slug: post.id.replace('es/', '') },
		}));
}

const { slug } = Astro.params;
const target = `/es/blog/${slug}`;
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="refresh" content={`0; url=${target}`} />
		<link rel="canonical" href={target} />
	</head>
	<body>
		<p>Redirecting to <a href={target}>{target}</a></p>
	</body>
</html>
